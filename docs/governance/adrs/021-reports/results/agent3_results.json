{
  "analysis": "Agent 3: Existing Module Gap Analysis",
  "adr": "021",
  "date": "2026-01-01",
  "module_8_analysis": {
    "module": "Module 8: Duration Analysis",
    "status": "EXISTS",
    "current_functionality": [
      "Wave threshold: N/A% above baseline",
      "Minimum wave duration: N/A years",
      "Data source: N/A",
      "Cox Proportional Hazards model fitted",
      "Covariates: ",
      "Concordance: N/A"
    ],
    "relevant_to_external_claims": [
      {
        "claim": "Status durability / retention layer",
        "module_8_relevance": "PARTIAL - Module 8 models wave duration but not LEGAL STATUS durability",
        "gap": "Need status-specific hazard rates (refugee vs parole)"
      },
      {
        "claim": "Parole 'cliff' at years 2-4",
        "module_8_relevance": "PARTIAL - Hazard model exists but trained on REFUGEE waves only",
        "gap": "Need separate hazard curves for parole cohorts"
      }
    ],
    "gaps": [
      "Wave detection is nationality-based, not legal-status-based",
      "Hazard model trained on refugee data only (no parole cohorts)",
      "No explicit 'status precarity' or 'legal cliff' modeling",
      "Survival analysis assumes all arrivals have similar retention probability"
    ]
  },
  "module_9_analysis": {
    "module": "Module 9: Scenario Modeling",
    "status": "EXISTS",
    "current_functionality": [
      "Base year: 2024",
      "Projection horizon: 2025-2045",
      "Monte Carlo draws: 1000",
      "Scenarios defined: CBO Full, Moderate, Zero, Pre-2020 Trend"
    ],
    "scenario_framework": {
      "scenarios": [
        "CBO Full",
        "Moderate",
        "Zero",
        "Pre-2020 Trend"
      ],
      "description": "4 scenarios covering policy spectrum from zero to high growth",
      "design_rationale": "Cover range from optimistic to restrictive immigration policy outcomes"
    },
    "relevant_to_external_claims": [
      {
        "claim": "Policy regime framework",
        "module_9_relevance": "PARTIAL - Scenarios exist but not defined by policy REGIMES",
        "current_approach": "Scenarios use ARIMA + growth rate assumptions",
        "gap": "Scenarios not tied to policy lever mechanisms"
      },
      {
        "claim": "Mechanism-based scenarios",
        "module_9_relevance": "LOW - CBO Full uses 8% compound growth, not policy mechanisms",
        "current_approach": "Growth rates are somewhat arbitrary",
        "gap": "Need scenarios defined by ceilings, parole continuation, capacity"
      },
      {
        "claim": "Wave integration",
        "module_9_relevance": "HIGH - Module 9 DOES integrate Module 8 wave survival",
        "current_approach": "Wave registry with conditional duration prediction",
        "gap": "Wave integration is refugee-centric, not status-aware"
      }
    ],
    "gaps": [
      "Scenarios defined by growth rates, not policy mechanisms",
      "'CBO Full' at 8% compound is not tied to specific policy assumptions",
      "No 'parole cliff' scenario that models attrition at years 2-4",
      "No capacity parameter (LSSND-like) in scenario framework",
      "Wave integration treats all waves uniformly (no status differentiation)"
    ]
  },
  "recommendation_mapping": [
    {
      "id": 1,
      "recommendation": "Two-component estimand (durable vs temporary)",
      "current_coverage": "NOT ADDRESSED",
      "module_changes_needed": [
        "New data pipeline to classify arrivals by status durability",
        "Modify Module 8 to track status-specific waves",
        "Modify Module 9 to project Y_t^dur and Y_t^temp separately"
      ],
      "effort": "HIGH"
    },
    {
      "id": 2,
      "recommendation": "Status-transition hazard model (Module 8b)",
      "current_coverage": "PARTIALLY ADDRESSED by Module 8",
      "module_changes_needed": [
        "Extend Module 8 with status-specific hazard rates",
        "Add parole-specific attrition curve (years 2-4 cliff)",
        "Create 'regularization event' probability parameter"
      ],
      "effort": "MEDIUM"
    },
    {
      "id": 3,
      "recommendation": "Synthetic control for LSSND",
      "current_coverage": "NOT ADDRESSED",
      "module_changes_needed": [
        "New analysis module or extend Module 7 (Causal)",
        "Construct donor pool from state-level refugee data",
        "Estimate capacity parameter from counterfactual"
      ],
      "effort": "MEDIUM-HIGH"
    },
    {
      "id": 4,
      "recommendation": "Policy regime variable R_t",
      "current_coverage": "IMPLICITLY in Module 2.1 (ARIMA structural breaks)",
      "module_changes_needed": [
        "Formalize regime definition (expansion/restriction/volatility)",
        "Create regime indicator for use across modules",
        "Add regime-conditional parameters to scenario framework"
      ],
      "effort": "LOW-MEDIUM"
    },
    {
      "id": 5,
      "recommendation": "Update data through FY2024",
      "current_coverage": "PARTIALLY - ND migration to 2024, refugees only to 2020",
      "module_changes_needed": [
        "Acquire updated refugee data (FY2021-2024)",
        "Create parole proxy dataset",
        "Re-run Modules 8-9 with extended data"
      ],
      "effort": "MEDIUM (data acquisition)"
    },
    {
      "id": 6,
      "recommendation": "Mechanism-based scenario framework",
      "current_coverage": "NOT ADDRESSED - scenarios use growth rates",
      "module_changes_needed": [
        "Redesign Module 9 scenario definitions",
        "Map scenarios to policy levers (ceilings, parole, capacity)",
        "Create 'parole cliff' and 'capacity constraint' scenarios"
      ],
      "effort": "MEDIUM-HIGH"
    },
    {
      "id": 7,
      "recommendation": "Secondary migration module",
      "current_coverage": "NOT ADDRESSED",
      "module_changes_needed": [
        "New module using ACS state-to-state migration",
        "Decompose FB growth into direct arrival vs domestic redistribution",
        "Sensitivity analysis on secondary migration share"
      ],
      "effort": "MEDIUM"
    },
    {
      "id": 8,
      "recommendation": "Policy timeline table and conceptual diagram",
      "current_coverage": "PARTIALLY in journal article text",
      "module_changes_needed": [
        "Create structured policy event table",
        "Add conceptual model diagram to Methods section",
        "Map policy events to model variables explicitly"
      ],
      "effort": "LOW"
    }
  ],
  "gap_summary": {
    "total_recommendations": 8,
    "fully_addressed": 1,
    "partially_addressed": 3,
    "not_addressed": 4,
    "high_priority_gaps": [
      "Two-component estimand (durable vs temporary)",
      "Mechanism-based scenario framework"
    ],
    "medium_priority_gaps": [
      "Status-transition hazard model (Module 8b)",
      "Synthetic control for LSSND",
      "Update data through FY2024",
      "Secondary migration module",
      "Policy timeline table and conceptual diagram"
    ],
    "low_priority_gaps": [],
    "module_8_gaps": [
      "Wave detection is nationality-based, not legal-status-based",
      "Hazard model trained on refugee data only (no parole cohorts)",
      "No explicit 'status precarity' or 'legal cliff' modeling",
      "Survival analysis assumes all arrivals have similar retention probability"
    ],
    "module_9_gaps": [
      "Scenarios defined by growth rates, not policy mechanisms",
      "'CBO Full' at 8% compound is not tied to specific policy assumptions",
      "No 'parole cliff' scenario that models attrition at years 2-4",
      "No capacity parameter (LSSND-like) in scenario framework",
      "Wave integration treats all waves uniformly (no status differentiation)"
    ]
  },
  "key_findings": [
    "Module 8 (Duration) exists with wave detection and Cox PH model, but is REFUGEE-ONLY.",
    "Module 9 (Scenarios) integrates wave survival but scenarios are GROWTH-RATE-BASED, not MECHANISM-BASED.",
    "The existing framework DOES have survival/hazard machinery that could be extended for status durability.",
    "Major gaps: (1) No status differentiation, (2) No capacity parameter, (3) No mechanism-based scenarios.",
    "The 'parole cliff' concept could be implemented as an extension to Module 8 hazard model.",
    "Policy regime variable could build on Module 2.1 structural break detection."
  ],
  "implementation_strategy": {
    "build_on_existing": [
      "Extend Module 8 hazard model with status-specific rates",
      "Add regime variable using Module 2.1 break detection",
      "Modify Module 9 scenario definitions for policy mechanisms"
    ],
    "new_modules_needed": [
      "Secondary migration analysis (ACS data)",
      "LSSND synthetic control (extend Module 7)"
    ],
    "data_acquisition_required": [
      "Refugee arrivals FY2021-2024",
      "Parole proxy dataset (OAW, U4U)"
    ]
  },
  "validation_of_external_claims": {
    "claim_methodology_gaps": "PARTIALLY VALIDATED - Existing modules have relevant machinery (wave detection, hazard models, scenario framework) but lack STATUS AWARENESS and MECHANISM-BASED scenario definitions as claimed.",
    "existing_strengths": "Module 8-9 integration is more sophisticated than external analysis implies. The wave registry and conditional duration prediction are directly relevant to the 'status durability' concept - they just need status differentiation."
  }
}
