{
  "module": "4",
  "analysis": "regression_extensions_beta_quantile_robust",
  "generated": "2025-12-29T06:06:05.817899+00:00",
  "input_files": [
    "module_3_1_panel_data.parquet",
    "nd_migration_summary.csv"
  ],
  "parameters": {
    "panel_observations": 765,
    "nd_time_series_length": 15,
    "years": [
      2010,
      2011,
      2012,
      2013,
      2014,
      2015,
      2016,
      2017,
      2018,
      2019,
      2020,
      2021,
      2022,
      2023,
      2024
    ],
    "models_estimated": {
      "beta_regression": {
        "family": "Binomial (quasi-beta)",
        "link": "Logit",
        "predictors": [
          "time_trend",
          "covid_2020",
          "lag_nd_share"
        ]
      },
      "quantile_regression": {
        "quantiles": [
          0.1,
          0.25,
          0.5,
          0.75,
          0.9
        ],
        "predictors": [
          "time_trend",
          "covid_2020"
        ],
        "bootstrap_iterations": 500
      },
      "robust_regression": {
        "estimators": [
          "Huber M-estimator",
          "Tukey Biweight"
        ],
        "comparison_baseline": "OLS"
      }
    }
  },
  "results": {
    "beta_regression": {
      "pseudo_r2": 0.0003600419467170157,
      "aic": 8.298819071664473,
      "time_trend_odds_ratio": 1.0115621858041999,
      "covid_odds_ratio": 0.8277865138704352
    },
    "quantile_regression": {
      "median_trend": 225.8888889876544,
      "trend_heterogeneity": 315.3636360184975,
      "covid_effect_range": [
        -3890.7692296915698,
        -424.363641966035
      ]
    },
    "robust_regression": {
      "ols_r_squared": 0.49983497504012064,
      "outliers_identified": [
        2019,
        2021
      ],
      "percent_diff_tukey_ols_trend": 22.13423433092716
    },
    "comparison_table": {
      "ols_vs_quantile_vs_robust": {
        "time_trend": {
          "ols": 210.97384412153235,
          "q10": -1.3636358518812426,
          "q25": 71.5000004081527,
          "q50": 225.8888889876544,
          "q75": 314.00000016661625,
          "q90": 301.30769243180805,
          "huber": 237.32437175825825,
          "tukey": 257.6712891563573
        },
        "covid_2020": {
          "ols": -2570.558784676354,
          "q10": -424.363641966035,
          "q25": -1360.0000010663118,
          "q50": -2805.2222224691363,
          "q75": -3786.9999999998954,
          "q90": -3890.7692296915698,
          "huber": -2837.969580705906,
          "tukey": -3000.817892060426
        }
      }
    }
  },
  "diagnostics": {
    "beta_regression": {
      "deviance": 0.0017209711746477266,
      "pearson_chi2": 0.0018263128290094614,
      "residual_mean": -1.939578829887204e-14,
      "residual_std": 0.0004893782267439284
    },
    "quantile_regression": {
      "pseudo_r2_by_quantile": {
        "q10": 0.16049221741444264,
        "q25": 0.14625143093203052,
        "q50": 0.313690906226044,
        "q75": 0.5881184487617958,
        "q90": 0.6972614575536038
      }
    },
    "robust_regression": {
      "year_2020_weights": {
        "huber": 1.0,
        "tukey": 1.0
      }
    }
  },
  "warnings": [],
  "decisions": [
    {
      "decision_id": "D001",
      "timestamp": "2025-12-29T06:05:56.851914+00:00",
      "category": "data_preparation",
      "decision": "Bounded ND share to (epsilon, 1-epsilon) for beta regression",
      "rationale": "Beta regression requires outcomes strictly between 0 and 1",
      "alternatives_considered": [
        "Use quasi-binomial GLM",
        "Transform with logit before OLS"
      ],
      "evidence": "Original range: [0.001016, 0.003031]",
      "reversible": true
    },
    {
      "decision_id": "D002",
      "timestamp": "2025-12-29T06:05:56.861653+00:00",
      "category": "methodology",
      "decision": "Used GLM with binomial family as quasi-beta regression",
      "rationale": "Native beta regression not in statsmodels; binomial GLM with logit link approximates beta regression for proportions",
      "alternatives_considered": [
        "Use betareg R package via rpy2",
        "Use fractional logit regression"
      ],
      "evidence": "Pseudo R-squared: 0.0004",
      "reversible": true
    },
    {
      "decision_id": "D003",
      "timestamp": "2025-12-29T06:06:03.858817+00:00",
      "category": "methodology",
      "decision": "Estimated quantile regression at 10th, 25th, 50th, 75th, and 90th percentiles",
      "rationale": "Captures heterogeneous effects across the distribution; reveals if relationships differ at extremes",
      "alternatives_considered": [
        "Additional quantiles (5th, 95th)",
        "Continuous quantile process"
      ],
      "evidence": "Bootstrap SE used for inference (n_boot=500)",
      "reversible": true
    },
    {
      "decision_id": "D004",
      "timestamp": "2025-12-29T06:06:03.866707+00:00",
      "category": "methodology",
      "decision": "Used Huber and Tukey biweight M-estimators for robust regression",
      "rationale": "Huber provides moderate robustness; Tukey biweight provides high breakdown point",
      "alternatives_considered": [
        "Least trimmed squares (LTS)",
        "S-estimator"
      ],
      "evidence": "Identified 2 Huber outliers, 2 Tukey outliers",
      "reversible": true
    }
  ],
  "next_steps": [
    "Use quantile regression insights for scenario analysis (Module 5)",
    "Robust estimates inform sensitivity analysis for projections",
    "Beta regression framework applicable to other proportional outcomes",
    "Compare results with time series models from Module 2"
  ]
}
