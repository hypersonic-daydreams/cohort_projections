{
  "module": "7",
  "analysis": "causal_inference_did_event_study",
  "generated": "2025-12-30T05:00:45.159715+00:00",
  "input_files": [
    "combined_components_of_change.csv",
    "refugee_arrivals_by_state_nationality.parquet",
    "results/module_3_1_panel_data.parquet"
  ],
  "parameters": {
    "analyses": [
      "Difference-in-Differences (Travel Ban)",
      "Interrupted Time Series (COVID)",
      "Event Study (Travel Ban)",
      "Synthetic Comparator (ND, descriptive)",
      "Shift-Share (Bartik) Instrument"
    ],
    "travel_ban_treatment_year": 2018,
    "covid_treatment_year": 2020,
    "synthetic_control_unit": "North Dakota"
  },
  "results": {
    "did_travel_ban": {
      "analysis": "Travel Ban DiD",
      "treatment_definition": {
        "treated_countries": [
          "Iran",
          "Iraq",
          "Libya",
          "Somalia",
          "Sudan",
          "Syria",
          "Yemen"
        ],
        "treatment_year": 2018,
        "policy": "Executive Order 13769 (Travel Ban)"
      },
      "sample_info": {
        "n_treatment_units": 7,
        "n_control_units": 119,
        "n_pre_periods": 16,
        "n_post_periods": 2,
        "n_observations": 1137,
        "years_analyzed": [
          2002,
          2003,
          2004,
          2005,
          2006,
          2007,
          2008,
          2009,
          2010,
          2011,
          2012,
          2013,
          2014,
          2015,
          2016,
          2017,
          2018,
          2019
        ]
      },
      "att_estimate": {
        "coefficient": -1.383546242708035,
        "std_error": 0.6461168644795392,
        "t_statistic": -2.1413250740986474,
        "p_value": 0.03224783245568213,
        "ci_95_lower": -2.6499120268918785,
        "ci_95_upper": -0.11718045852419112,
        "significance": "*"
      },
      "percentage_effect": {
        "estimate": -74.9312025512332,
        "interpretation": "Refugee arrivals from banned countries decreased by approximately 74.9% post-ban"
      },
      "pre_trend_test": {
        "treated_x_trend_coef": 0.08738171406923691,
        "t_statistic": 0.9653930827886065,
        "p_value": 0.3343479647954617,
        "parallel_trends_supported": "True"
      },
      "model_specification": {
        "dependent_variable": "log(arrivals + 1)",
        "fixed_effects": [
          "nationality",
          "year"
        ],
        "standard_errors": "clustered by nationality"
      },
      "model_fit": {
        "r_squared": 0.8285501997924065,
        "r_squared_adj": 0.8038600472952404,
        "n_observations": 1137,
        "df_model": 143,
        "df_resid": 993
      }
    },
    "did_covid": {
      "analysis": "COVID-19 Interrupted Time Series",
      "treatment_definition": {
        "event": "COVID-19 pandemic",
        "treatment_year": 2020,
        "policy": "Travel restrictions and border closures"
      },
      "sample_info": {
        "n_states": 51,
        "n_pre_periods": 10,
        "n_post_periods": 5,
        "n_observations": 765,
        "years_analyzed": [
          2010,
          2011,
          2012,
          2013,
          2014,
          2015,
          2016,
          2017,
          2018,
          2019,
          2020,
          2021,
          2022,
          2023,
          2024
        ]
      },
      "level_effect": {
        "coefficient": -19502.524183006433,
        "std_error": 4555.993837969148,
        "t_statistic": -4.28063006154103,
        "p_value": 1.863649319765136e-05,
        "ci_95_lower": -28432.108019212377,
        "ci_95_upper": -10572.940346800488,
        "significance": "***"
      },
      "trend_change": {
        "coefficient": 14112.681699346393,
        "std_error": 3288.427335650584,
        "t_statistic": 4.2916203579588394,
        "p_value": 1.7737401786925643e-05,
        "interpretation": "International migration changes by 14,113 per year post-COVID"
      },
      "percentage_effect": {
        "pre_covid_mean": 15669.256862745098,
        "level_effect_pct": -124.46361913547561
      },
      "model_specification": {
        "dependent_variable": "intl_migration",
        "fixed_effects": [
          "state"
        ],
        "standard_errors": "clustered by state"
      },
      "model_fit": {
        "r_squared": 0.6673339355462738,
        "r_squared_adj": 0.6425360432592873
      }
    },
    "event_study": {
      "analysis": "Event Study - Travel Ban",
      "specification": {
        "event_year": 2018,
        "reference_period": -1,
        "periods_estimated": [
          -16,
          -15,
          -14,
          -13,
          -12,
          -11,
          -10,
          -9,
          -8,
          -7,
          -6,
          -5,
          -4,
          -3,
          -2,
          0,
          1
        ]
      },
      "coefficients": [
        {
          "rel_time": -16,
          "year": 2002,
          "coefficient": -1.8732301748132671,
          "std_error": 1.0758691622305525,
          "t_statistic": -1.7411319522622815,
          "p_value": 0.08166045169049249,
          "ci_lower": -3.9818949848624303,
          "ci_upper": 0.23543463523589625,
          "is_reference": false
        },
        {
          "rel_time": -15,
          "year": 2003,
          "coefficient": -1.9241878094315703,
          "std_error": 1.2498988993902405,
          "t_statistic": -1.5394747610148947,
          "p_value": 0.12368843487896634,
          "ci_lower": -4.373944636552694,
          "ci_upper": 0.5255690176895536,
          "is_reference": false
        },
        {
          "rel_time": -14,
          "year": 2004,
          "coefficient": -1.512068155284361,
          "std_error": 1.1951284637936468,
          "t_statistic": -1.2651929906218329,
          "p_value": 0.2058021545191755,
          "ci_lower": -3.8544769012185904,
          "ci_upper": 0.8303405906498689,
          "is_reference": false
        },
        {
          "rel_time": -13,
          "year": 2005,
          "coefficient": -1.6984091650794786,
          "std_error": 1.1239268101220758,
          "t_statistic": -1.5111385810745142,
          "p_value": 0.13075314677696262,
          "ci_lower": -3.9012652341777354,
          "ci_upper": 0.504446904018778,
          "is_reference": false
        },
        {
          "rel_time": -12,
          "year": 2006,
          "coefficient": -1.2977987346633746,
          "std_error": 1.0207779063072255,
          "t_statistic": -1.2713820769870519,
          "p_value": 0.20359275567633295,
          "ci_lower": -3.2984866672397386,
          "ci_upper": 0.7028891979129892,
          "is_reference": false
        },
        {
          "rel_time": -11,
          "year": 2007,
          "coefficient": -1.1318388586360162,
          "std_error": 0.8497218540404459,
          "t_statistic": -1.3320110024875762,
          "p_value": 0.1828565730865287,
          "ci_lower": -2.7972630894318904,
          "ci_upper": 0.5335853721598582,
          "is_reference": false
        },
        {
          "rel_time": -10,
          "year": 2008,
          "coefficient": -1.3628789728829394,
          "std_error": 0.9563442174729239,
          "t_statistic": -1.4250925011961244,
          "p_value": 0.15413046401213745,
          "ci_lower": -3.237279195953011,
          "ci_upper": 0.5115212501871325,
          "is_reference": false
        },
        {
          "rel_time": -9,
          "year": 2009,
          "coefficient": -0.554564908932799,
          "std_error": 0.8667314319704762,
          "t_statistic": -0.6398347728915517,
          "p_value": 0.5222800232608424,
          "ci_lower": -2.25332729986376,
          "ci_upper": 1.1441974819981624,
          "is_reference": false
        },
        {
          "rel_time": -8,
          "year": 2010,
          "coefficient": -1.2827613153050832,
          "std_error": 0.8841847333201351,
          "t_statistic": -1.4507842840582457,
          "p_value": 0.14683993721130628,
          "ci_lower": -3.0157315482927003,
          "ci_upper": 0.4502089176825339,
          "is_reference": false
        },
        {
          "rel_time": -7,
          "year": 2011,
          "coefficient": -0.9730779794606581,
          "std_error": 0.7883856924324246,
          "t_statistic": -1.2342664114798914,
          "p_value": 0.21710364765511092,
          "ci_lower": -2.5182855425548825,
          "ci_upper": 0.5721295836335665,
          "is_reference": false
        },
        {
          "rel_time": -6,
          "year": 2012,
          "coefficient": -0.6902065530427108,
          "std_error": 0.8367220696499374,
          "t_statistic": -0.8248934479898148,
          "p_value": 0.40943208645710893,
          "ci_lower": -2.3301516746264026,
          "ci_upper": 0.9497385685409812,
          "is_reference": false
        },
        {
          "rel_time": -5,
          "year": 2013,
          "coefficient": -0.5921995680160255,
          "std_error": 0.8191817520004212,
          "t_statistic": -0.7229159665359843,
          "p_value": 0.469731513517166,
          "ci_lower": -2.1977662987292734,
          "ci_upper": 1.0133671626972225,
          "is_reference": false
        },
        {
          "rel_time": -4,
          "year": 2014,
          "coefficient": -0.4802497004140472,
          "std_error": 0.728795870187358,
          "t_statistic": -0.6589632571471421,
          "p_value": 0.5099193634040385,
          "ci_lower": -1.9086633580627974,
          "ci_upper": 0.9481639572347031,
          "is_reference": false
        },
        {
          "rel_time": -3,
          "year": 2015,
          "coefficient": 0.03625455894676639,
          "std_error": 0.25632945777386784,
          "t_statistic": 0.14143734887759143,
          "p_value": 0.8875244506821496,
          "ci_lower": -0.4661419464666952,
          "ci_upper": 0.538651064360228,
          "is_reference": false
        },
        {
          "rel_time": -2,
          "year": 2016,
          "coefficient": 0.03715239619580935,
          "std_error": 0.1946719729148567,
          "t_statistic": 0.1908461482129152,
          "p_value": 0.8486461320608261,
          "ci_lower": -0.3443976595166667,
          "ci_upper": 0.41870245190828537,
          "is_reference": false
        },
        {
          "rel_time": -1,
          "year": 2017,
          "coefficient": 0.0,
          "std_error": 0.0,
          "ci_lower": 0.0,
          "ci_upper": 0.0,
          "is_reference": true
        },
        {
          "rel_time": 0,
          "year": 2018,
          "coefficient": -2.6880767438506457,
          "std_error": 0.5344179102386903,
          "t_statistic": -5.0299151513280185,
          "p_value": 4.906969347997962e-07,
          "ci_lower": -3.7355166006116383,
          "ci_upper": -1.6406368870896533,
          "is_reference": false
        },
        {
          "rel_time": 1,
          "year": 2019,
          "coefficient": -1.8021877225689673,
          "std_error": 0.37328829505650285,
          "t_statistic": -4.8278709684593215,
          "p_value": 1.3800045703553326e-06,
          "ci_lower": -2.533819336730074,
          "ci_upper": -1.0705561084078608,
          "is_reference": false
        }
      ],
      "pre_trend_test": {
        "f_statistic": 4.312300423661885,
        "p_value": 1.9910778520356643e-06,
        "parallel_trends_supported": false
      },
      "model_fit": {
        "r_squared": 0.8330307205909447,
        "r_squared_adj": 0.8058576239419788
      }
    },
    "synthetic_control": {
      "analysis": "Synthetic Comparator (descriptive)",
      "treated_unit": "North Dakota",
      "treatment_year": 2017,
      "feasible": true,
      "donor_pool_size": 50,
      "weights": {
        "Florida": 0.02474914254995787,
        "Oregon": 0.027252385882609552,
        "Rhode Island": 0.2009821495589068,
        "Vermont": 0.24520701001066555,
        "Washington": 0.0828835539082412,
        "Wyoming": 0.418925758089619
      },
      "pre_treatment_fit": {
        "rmspe": 0.01983823467666539,
        "n_periods": 7
      },
      "post_period_gap": {
        "mean_gap": 0.5701403437721894,
        "std_gap": 0.7775961776416719,
        "rmspe": 0.9642177280467358,
        "rmspe_ratio": 48.60400856034289
      },
      "time_series": [
        {
          "year": 2010,
          "actual": 0.6935881627620222,
          "synthetic": 0.6469304941179078,
          "gap": 0.04665766864411436
        },
        {
          "year": 2011,
          "actual": 1.7636092577086793,
          "synthetic": 1.7713448839590007,
          "gap": -0.007735626250321426
        },
        {
          "year": 2012,
          "actual": 1.8441330225126633,
          "synthetic": 1.861442267845697,
          "gap": -0.017309245333033685
        },
        {
          "year": 2013,
          "actual": 1.7340824643330766,
          "synthetic": 1.7398204257069672,
          "gap": -0.005737961373890599
        },
        {
          "year": 2014,
          "actual": 1.3008706763986053,
          "synthetic": 1.3029262550491603,
          "gap": -0.0020555786505549456
        },
        {
          "year": 2015,
          "actual": 2.9740436272479047,
          "synthetic": 2.9672790284140227,
          "gap": 0.0067645988338820295
        },
        {
          "year": 2016,
          "actual": 2.101534953723909,
          "synthetic": 2.089890575118027,
          "gap": 0.011644378605882189
        },
        {
          "year": 2017,
          "actual": 3.799115962233484,
          "synthetic": 2.3466687330220757,
          "gap": 1.4524472292114083
        },
        {
          "year": 2018,
          "actual": 1.6406556307248619,
          "synthetic": 2.044906199142711,
          "gap": -0.404250568417849
        },
        {
          "year": 2019,
          "actual": 0.8301428264661056,
          "synthetic": 0.9924311675345071,
          "gap": -0.1622883410684015
        },
        {
          "year": 2020,
          "actual": 0.038483098864363754,
          "synthetic": 0.04690706280732879,
          "gap": -0.008423963942965039
        },
        {
          "year": 2021,
          "actual": 0.58228765781538,
          "synthetic": 0.6718128226961557,
          "gap": -0.08952516488077567
        },
        {
          "year": 2022,
          "actual": 4.2083996430478186,
          "synthetic": 3.4459336431511005,
          "gap": 0.762465999896718
        },
        {
          "year": 2023,
          "actual": 5.410324099831823,
          "synthetic": 3.9965657643480177,
          "gap": 1.4137583354838053
        },
        {
          "year": 2024,
          "actual": 6.435106607345512,
          "synthetic": 4.838167383449937,
          "gap": 1.5969392238955749
        }
      ],
      "optimization": {
        "converged": true,
        "objective_value": 0.0027548888856051444
      }
    },
    "bartik_instrument": {
      "analysis": "Shift-Share (Bartik) Instrument",
      "feasible": true,
      "construction": {
        "baseline_year": 2010,
        "share_component": "State share of nationality at baseline",
        "shift_component": "Leave-one-out national change in nationality arrivals"
      },
      "sample_info": {
        "n_observations": 528,
        "n_states": 48,
        "n_years": 11,
        "years": [
          2010,
          2011,
          2012,
          2013,
          2014,
          2015,
          2016,
          2017,
          2018,
          2019,
          2020
        ]
      },
      "first_stage": {
        "bartik_coefficient": 5.510303917335125,
        "std_error": 0.871817165587482,
        "t_statistic": 6.320481099522691,
        "p_value": 2.6075022329732277e-10,
        "f_statistic": 39.94848132942357,
        "strong_instrument": "True"
      },
      "instrument_statistics": {
        "mean": -691.1922038277709,
        "std": 1395.5578964697918,
        "min": -11300.991014291607,
        "max": 5393.178180271543
      },
      "model_fit": {
        "r_squared": 0.8580067686736881,
        "r_squared_adj": 0.8404468381471932
      }
    }
  },
  "diagnostics": {
    "parallel_trends": {
      "travel_ban_supported": "True",
      "event_study_pre_trend_p": 1.9910778520356643e-06
    },
    "instrument_strength": {
      "bartik_f_statistic": 39.94848132942357,
      "strong_instrument": "True"
    },
    "synthetic_control_fit": {
      "pre_treatment_rmspe": 0.01983823467666539,
      "rmspe_ratio": 48.60400856034289
    }
  },
  "warnings": [],
  "decisions": [
    {
      "decision_id": "D001",
      "timestamp": "2025-12-30T05:00:41.844932+00:00",
      "category": "causal_identification",
      "decision": "Use 2018 as first post-treatment year for Travel Ban DiD",
      "rationale": "Executive Order 13769 signed Jan 27, 2017, repeatedly blocked. 2017 reflects partial implementation; 2018 is first full year of effect.",
      "alternatives_considered": [
        "Use 2017 as first post year",
        "Use phased treatment intensity"
      ],
      "evidence": "Affected countries: ['Iran', 'Iraq', 'Libya', 'Somalia', 'Sudan', 'Syria', 'Yemen']",
      "reversible": true
    },
    {
      "decision_id": "D003",
      "timestamp": "2025-12-30T05:00:42.153231+00:00",
      "category": "model_specification",
      "decision": "Use two-way fixed effects with nationality-clustered standard errors",
      "rationale": "Nationality FE controls for time-invariant heterogeneity; Year FE controls for common shocks",
      "alternatives_considered": [
        "HC1/HC3 robust SE",
        "Wild bootstrap",
        "Random effects"
      ],
      "evidence": "ATT = -1.3835 (SE = 0.6461)",
      "reversible": true
    },
    {
      "decision_id": "D002",
      "timestamp": "2025-12-30T05:00:42.156572+00:00",
      "category": "causal_identification",
      "decision": "Use 2020 as COVID treatment year for state-level DiD",
      "rationale": "COVID-19 travel restrictions began March 2020, affecting international migration universally",
      "alternatives_considered": [
        "Use 2021 to capture full-year effect",
        "Exclude 2020 due to partial year data"
      ],
      "evidence": "Census PEP shows 2020 as partial year with anomalous low values",
      "reversible": true
    },
    {
      "decision_id": "D004",
      "timestamp": "2025-12-30T05:00:42.720660+00:00",
      "category": "causal_identification",
      "decision": "Use international migration rate (per 1000) for synthetic comparator",
      "rationale": "Rate normalizes for population differences across states",
      "alternatives_considered": [
        "Use raw counts",
        "Use log transformation",
        "Use growth rates"
      ],
      "evidence": "Pre-treatment RMSPE = 0.0198",
      "reversible": true
    },
    {
      "decision_id": "D005",
      "timestamp": "2025-12-30T05:00:42.962689+00:00",
      "category": "causal_identification",
      "decision": "Use 2010 baseline with leave-one-out shifts for shift-share construction",
      "rationale": "2010 is first year with reliable state-level refugee data and aligns with panel start",
      "alternatives_considered": [
        "Use 2005 as baseline",
        "Use average of early years",
        "Time-varying shares"
      ],
      "evidence": "First-stage F = 39.95",
      "reversible": true
    }
  ],
  "next_steps": [
    "Module 8: Conduct robustness checks (alternative specifications, placebo tests)",
    "Consider heterogeneous treatment effects by state/region",
    "Extend event study window with more recent data when available",
    "Validate synthetic control with leave-one-out placebo analysis"
  ]
}
