{
  "module": "5",
  "analysis": "gravity_model_network_analysis",
  "generated": "2025-12-30T04:40:44.698773+00:00",
  "input_files": [
    "dhs_lpr_by_state_country.parquet",
    "acs_foreign_born_by_state_origin.parquet",
    "results/module_3_2_origin_panel.parquet"
  ],
  "parameters": {
    "data_preparation": {
      "flow_variable": "DHS LPR admissions (FY2023)",
      "diaspora_stock_variable": "ACS foreign-born by origin country (2023)",
      "destination_mass": "ACS total foreign-born by state (2023)",
      "origin_mass": "ACS national total foreign-born by origin country (2023)",
      "observations_final": 4940,
      "unique_states": 52,
      "unique_origins": 95
    },
    "gravity_model": {
      "estimator": "PPML (Poisson Pseudo-Maximum Likelihood)",
      "family": "Poisson",
      "link": "log",
      "models_estimated": 3
    },
    "network_analysis": {
      "cross_sectional_method": "PPML",
      "panel_method": "OLS",
      "controls": [
        "initial_size"
      ]
    }
  },
  "results": {
    "gravity_model": {
      "model_1_simple_network": {
        "specification": "Flow ~ log(Diaspora_Stock)",
        "n_observations": 4845,
        "coefficients": {
          "const": {
            "estimate": 1.266582403662363,
            "std_error": 0.9801949051919836,
            "z_statistic": 1.2921740328922509,
            "p_value": 0.1962968821805804,
            "ci_95_lower": -0.6545643083435777,
            "ci_95_upper": 3.1877291156683034
          },
          "log_diaspora": {
            "estimate": 0.4478909199808008,
            "std_error": 0.10416771709284747,
            "z_statistic": 4.299709473152643,
            "p_value": 1.7102215952080613e-05,
            "ci_95_lower": 0.24372594612706233,
            "ci_95_upper": 0.6520558938345392
          }
        },
        "standard_errors": {
          "model_based": 0.0005973451253038001,
          "hc1": 0.04920536449942569,
          "cluster_state": 0.043424444188792474,
          "cluster_origin": 0.10671175516128974,
          "cluster_two_way": 0.10416771709284747,
          "used": 0.10416771709284747
        },
        "fit_statistics": {
          "log_likelihood": -934340.0063569909,
          "aic": 1868684.0127139818,
          "bic": 1812221.6971766327,
          "pseudo_r2_mcfadden": 0.23598040804746523,
          "correlation_actual_fitted": 0.27962916584306563,
          "deviance": 1853317.954501938,
          "pearson_chi2": 15267555.535303287
        }
      },
      "model_2_full_gravity": {
        "specification": "Flow ~ log(Diaspora) + log(Origin_Mass) + log(Dest_Mass)",
        "n_observations": 4845,
        "coefficients": {
          "const": {
            "estimate": -7.710909386279547,
            "std_error": 3.123026184615757,
            "z_statistic": -2.4690505075698757,
            "p_value": 0.013547209580402342,
            "ci_95_lower": -13.831928230901969,
            "ci_95_upper": -1.589890541657125
          },
          "log_diaspora": {
            "estimate": 0.13952824892750423,
            "std_error": 0.24784174923220664,
            "z_statistic": 0.562973144596305,
            "p_value": 0.5734531710929001,
            "ci_95_lower": -0.34623265343302834,
            "ci_95_upper": 0.6252891512880369
          },
          "log_origin_total": {
            "estimate": 0.0461295874629808,
            "std_error": 0.19184476395057645,
            "z_statistic": 0.24045267909873644,
            "p_value": 0.8099793437988656,
            "ci_95_lower": -0.32987924050273715,
            "ci_95_upper": 0.42213841542869873
          },
          "log_state_total": {
            "estimate": 0.7917204255235035,
            "std_error": 0.21157335259284427,
            "z_statistic": 3.742061161393539,
            "p_value": 0.00018251707785377214,
            "ci_95_lower": 0.3770442743531347,
            "ci_95_upper": 1.2063965766938725
          }
        },
        "standard_errors": {
          "model_based": 0.0016147368310022593,
          "hc1": 0.17622461561729819,
          "cluster_state": 0.11312342546229685,
          "cluster_origin": 0.28232852938796626,
          "cluster_two_way": 0.24784174923220664,
          "used": 0.24784174923220664
        },
        "fit_statistics": {
          "log_likelihood": -734628.6741179258,
          "aic": 1469265.3482358516,
          "bic": 1412816.004103551,
          "pseudo_r2_mcfadden": 0.3992864524504155,
          "correlation_actual_fitted": 0.3506140218905289,
          "deviance": 1453895.2900238077,
          "pearson_chi2": 4088669.4734535553
        }
      },
      "model_3_state_fixed_effects": {
        "specification": "Flow ~ log(Diaspora) + State_FE",
        "n_observations": 4845,
        "n_state_dummies": 50,
        "network_elasticity": {
          "estimate": 0.1625438505318896,
          "std_error": 0.14758724172417054,
          "z_statistic": 1.101340797707107,
          "p_value": 0.2707483612623536,
          "ci_95_lower": -0.1267218278250918,
          "ci_95_upper": 0.45180952888887105
        },
        "standard_errors": {
          "model_based": 0.0007597604485430628,
          "hc1": 0.07086404179335974,
          "cluster_state": 0.03306732161590907,
          "cluster_origin": 0.16051398666995093,
          "cluster_two_way": 0.14758724172417054,
          "used": 0.14758724172417054
        },
        "fit_statistics": {
          "log_likelihood": -717292.0313201576,
          "aic": 1434688.0626403152,
          "bic": 1378550.032229182,
          "pseudo_r2_mcfadden": 0.4134628065250123,
          "correlation_actual_fitted": NaN
        }
      },
      "model_comparison": {
        "preferred_model": "Full Gravity",
        "aic_comparison": {
          "simple": 1868684.0127139818,
          "full": 1469265.3482358516,
          "state_fe": 1434688.0626403152
        },
        "network_elasticity_comparison": {
          "simple": 0.4478909199808008,
          "full": 0.13952824892750423,
          "state_fe": 0.1625438505318896
        }
      },
      "interpretation": {
        "diaspora_association_full": 0.13952824892750423,
        "interpretation": "A 1% increase in diaspora stock is associated with a 0.1395% increase in new LPR admissions",
        "effect_strength": "weak"
      }
    },
    "network_effects": {
      "nd_cross_sectional_ppml": {
        "n_observations": 95,
        "n_origin_countries": 95,
        "coefficients": {
          "const": {
            "estimate": 2.611465087151047,
            "std_error": 0.06221301484987007,
            "p_value": 0.0
          },
          "log_diaspora": {
            "estimate": 0.014582969691358149,
            "std_error": 0.012586397379372845,
            "z_statistic": 1.1586293719962613,
            "p_value": 0.24660729107693136,
            "ci_95_lower": -0.010085915867321948,
            "ci_95_upper": 0.03925185525003824
          }
        },
        "fit_statistics": {
          "pseudo_r2": 0.00023818278514931013,
          "correlation_actual_fitted": 0.006456850147884892,
          "aic": 5657.143637131966,
          "deviance": 5492.469238461342
        }
      },
      "nd_panel_ols": {
        "n_observations": 707,
        "n_countries": 88,
        "years": [
          2010,
          2011,
          2012,
          2013,
          2014,
          2015,
          2016,
          2017,
          2018,
          2019,
          2020,
          2021,
          2022,
          2023
        ],
        "coefficients": {
          "const": {
            "estimate": 0.4833849412053937,
            "std_error": 0.25500531278773847,
            "p_value": 0.05842331915167045
          },
          "network_elasticity": {
            "estimate": 0.8506798478794928,
            "std_error": 0.04556601009543284,
            "t_statistic": 18.669175688146503,
            "p_value": 1.656176778734832e-63,
            "ci_95_lower": 0.7612185239322885,
            "ci_95_upper": 0.9401411718266971
          }
        },
        "fit_statistics": {
          "r_squared": 0.3308263023130543,
          "adj_r_squared": 0.3298771197631438,
          "f_statistic": 348.53812087488035,
          "f_p_value": 1.6561767787344346e-63
        },
        "interpretation": {
          "elasticity": 0.8506798478794928,
          "description": "A 1% increase in lagged diaspora stock is associated with a 0.8507% increase in current stock"
        }
      },
      "nd_panel_with_controls": {
        "n_observations": 707,
        "coefficients": {
          "const": {
            "estimate": 0.17482346017648892,
            "std_error": 0.24585500009046266,
            "t_statistic": 0.7110836066468544,
            "p_value": 0.47726795050532633
          },
          "log_stock_lag1": {
            "estimate": 0.6769690728996101,
            "std_error": 0.04805494853574731,
            "t_statistic": 14.087395648671304,
            "p_value": 6.927149617381567e-40
          },
          "log_initial": {
            "estimate": 0.26156645629923125,
            "std_error": 0.030926590073355128,
            "t_statistic": 8.457655877315243,
            "p_value": 1.57100425346337e-16
          }
        },
        "fit_statistics": {
          "r_squared": 0.39254818907103006,
          "adj_r_squared": 0.39082247369907275
        },
        "interpretation": {
          "network_elasticity_with_controls": 0.6769690728996101,
          "initial_size_effect": 0.26156645629923125
        }
      },
      "summary": {
        "cross_sectional_elasticity": 0.014582969691358149,
        "panel_elasticity": 0.8506798478794928,
        "controlled_elasticity": 0.6769690728996101
      }
    }
  },
  "diagnostics": {
    "gravity_model": {
      "n_observations": 4845,
      "deviance": 1453895.2900238077,
      "pearson_chi2": 4088669.4734535553,
      "correlation_actual_fitted": 0.3506140218905289
    },
    "nd_network": {
      "cross_sectional_n": 95,
      "panel_n": 707
    }
  },
  "warnings": [
    "Gravity model fit is moderate - consider additional controls"
  ],
  "decisions": [
    {
      "decision_id": "D001",
      "timestamp": "2025-12-30T04:40:42.533021+00:00",
      "category": "data_preparation",
      "decision": "Harmonized country names between DHS LPR and ACS datasets",
      "rationale": "Different data sources use different country naming conventions",
      "alternatives_considered": [
        "Fuzzy matching",
        "Manual mapping only"
      ],
      "evidence": "Matched 95 countries across datasets",
      "reversible": true
    },
    {
      "decision_id": "D002",
      "timestamp": "2025-12-30T04:40:42.965194+00:00",
      "category": "methodology",
      "decision": "Used PPML for gravity estimation instead of log-linear OLS",
      "rationale": "PPML handles zeros naturally and is consistent under heteroskedasticity (Santos Silva & Tenreyro 2006)",
      "alternatives_considered": [
        "Log-linear OLS with log(flow+1)",
        "Negative binomial regression",
        "Zero-inflated Poisson"
      ],
      "evidence": "Full model pseudo-R2: 0.3993",
      "reversible": true
    },
    {
      "decision_id": "D003",
      "timestamp": "2025-12-30T04:40:43.024141+00:00",
      "category": "methodology",
      "decision": "Estimated network effects using both cross-sectional PPML and panel OLS",
      "rationale": "Cross-sectional captures contemporaneous flow-stock relationship; panel captures dynamic persistence",
      "alternatives_considered": [
        "GMM panel estimation",
        "Instrumental variables"
      ],
      "evidence": "Cross-sectional N=95, Panel N=707",
      "reversible": true
    }
  ],
  "next_steps": [
    "Compare gravity model predictions with Module 2 time series forecasts",
    "Use network elasticity for projection scenarios",
    "Investigate origin-specific network effects for major sending countries",
    "Consider instrumental variable estimation to address endogeneity"
  ]
}
